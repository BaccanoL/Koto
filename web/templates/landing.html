<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koto (è¨€) - æ™ºèƒ½ AI åŠ©æ‰‹</title>
    <meta name="description" content="Koto æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ AI åŠ©æ‰‹ï¼Œæ”¯æŒæ–‡æ¡£å¤„ç†ã€PPT ç”Ÿæˆã€çŸ¥è¯†å›¾è°±ã€è¯­éŸ³äº¤äº’ç­‰å¤šç§åŠŸèƒ½ã€‚">
    <style>
        :root {
            --bg-primary: #05080f;
            --bg-secondary: #0b111d;
            --bg-tertiary: #111a2a;
            --accent-primary: #63c6ff;
            --accent-secondary: #76f7d4;
            --accent-gradient: linear-gradient(135deg, #63c6ff, #76f7d4);
            --text-primary: #e8eefc;
            --text-secondary: #8896b3;
            --text-tertiary: #5a6a85;
            --border-color: rgba(255,255,255,0.08);
            --radius-sm: 10px;
            --radius-md: 14px;
            --radius-lg: 18px;
            --radius-xl: 22px;
            --transition: all 0.3s ease;
            --shadow-glow: 0 0 30px rgba(99,198,255,0.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Background effects */
        .bg-texture {
            position: fixed; inset: 0; z-index: 0; pointer-events: none;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(99,198,255,0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(118,247,212,0.04) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(99,198,255,0.02) 0%, transparent 70%);
        }

        .floating-orb {
            position: fixed; border-radius: 50%; filter: blur(80px); opacity: 0.3;
            animation: float 20s ease-in-out infinite;
        }
        .floating-orb.orb-1 { width: 400px; height: 400px; top: -100px; left: -100px; background: rgba(99,198,255,0.15); }
        .floating-orb.orb-2 { width: 300px; height: 300px; bottom: -50px; right: -50px; background: rgba(118,247,212,0.1); animation-delay: -10s; }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            33% { transform: translate(30px, -30px); }
            66% { transform: translate(-20px, 20px); }
        }

        /* Navigation */
        .nav {
            position: fixed; top: 0; left: 0; right: 0; z-index: 100;
            padding: 16px 40px;
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(5,8,15,0.8); backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
        }

        .nav-brand {
            display: flex; align-items: center; gap: 12px;
            font-size: 24px; font-weight: 700;
            text-decoration: none; color: var(--text-primary);
        }

        .nav-brand .logo {
            width: 40px; height: 40px; border-radius: 12px;
            background: var(--accent-gradient);
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; font-weight: 800; color: #05080f;
        }

        .nav-links {
            display: flex; align-items: center; gap: 24px;
        }

        .nav-links a {
            color: var(--text-secondary); text-decoration: none;
            font-size: 15px; transition: var(--transition);
        }
        .nav-links a:hover { color: var(--text-primary); }

        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 10px 24px; border-radius: var(--radius-sm);
            font-size: 15px; font-weight: 600; cursor: pointer;
            transition: var(--transition); border: none; text-decoration: none;
        }

        .btn-primary {
            background: var(--accent-gradient); color: #05080f;
            box-shadow: 0 4px 15px rgba(99,198,255,0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(99,198,255,0.4);
        }

        .btn-ghost {
            background: transparent; color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        .btn-ghost:hover { background: rgba(255,255,255,0.05); border-color: var(--accent-primary); }

        /* Hero section */
        .hero {
            position: relative; z-index: 1;
            min-height: 100vh;
            display: flex; align-items: center; justify-content: center;
            padding: 120px 40px 80px;
        }

        .hero-content {
            max-width: 800px; text-align: center;
        }

        .hero-badge {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 6px 16px; border-radius: 20px;
            background: rgba(99,198,255,0.1); border: 1px solid rgba(99,198,255,0.2);
            color: var(--accent-primary); font-size: 13px; font-weight: 500;
            margin-bottom: 32px;
        }

        .hero-title {
            font-size: clamp(40px, 6vw, 72px);
            font-weight: 800; line-height: 1.1;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-primary) 50%, var(--accent-secondary) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-desc {
            font-size: 18px; line-height: 1.7;
            color: var(--text-secondary);
            max-width: 600px; margin: 0 auto 48px;
        }

        .hero-actions {
            display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;
        }

        /* Features */
        .features {
            position: relative; z-index: 1;
            padding: 100px 40px;
            max-width: 1200px; margin: 0 auto;
        }

        .section-title {
            font-size: 36px; font-weight: 700; text-align: center;
            margin-bottom: 16px;
        }

        .section-desc {
            color: var(--text-secondary); text-align: center;
            font-size: 16px; max-width: 600px; margin: 0 auto 64px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .feature-card {
            padding: 32px; border-radius: var(--radius-lg);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }
        .feature-card:hover {
            border-color: rgba(99,198,255,0.2);
            transform: translateY(-4px);
            box-shadow: var(--shadow-glow);
        }

        .feature-icon {
            width: 48px; height: 48px; border-radius: 12px;
            background: rgba(99,198,255,0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; margin-bottom: 20px;
        }

        .feature-card h3 {
            font-size: 18px; font-weight: 600; margin-bottom: 12px;
        }

        .feature-card p {
            color: var(--text-secondary); font-size: 14px; line-height: 1.6;
        }

        /* Stats */
        .stats {
            position: relative; z-index: 1;
            display: flex; justify-content: center; gap: 80px; flex-wrap: wrap;
            padding: 60px 40px;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            max-width: 1000px; margin: 0 auto;
        }

        .stat { text-align: center; }
        .stat-value {
            font-size: 48px; font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .stat-label { color: var(--text-secondary); font-size: 14px; margin-top: 8px; }

        /* Auth Modal */
        .auth-overlay {
            display: none; position: fixed; inset: 0; z-index: 200;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(8px);
            align-items: center; justify-content: center;
        }
        .auth-overlay.active { display: flex; }

        .auth-card {
            width: 420px; max-width: 90vw; padding: 40px;
            background: var(--bg-secondary); border-radius: var(--radius-xl);
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .auth-card h2 {
            font-size: 24px; font-weight: 700; margin-bottom: 8px;
        }

        .auth-card .subtitle {
            color: var(--text-secondary); font-size: 14px; margin-bottom: 32px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block; font-size: 13px; font-weight: 500;
            color: var(--text-secondary); margin-bottom: 8px;
        }

        .form-group input {
            width: 100%; padding: 12px 16px;
            background: var(--bg-tertiary); border: 1px solid var(--border-color);
            border-radius: var(--radius-sm); color: var(--text-primary);
            font-size: 15px; outline: none; transition: var(--transition);
        }

        .form-group input:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(99,198,255,0.1);
        }

        .form-group input::placeholder { color: var(--text-tertiary); }

        .auth-error {
            display: none; padding: 10px 14px; margin-bottom: 16px;
            background: rgba(255,80,80,0.1); border: 1px solid rgba(255,80,80,0.2);
            border-radius: var(--radius-sm); color: #ff5050; font-size: 13px;
        }
        .auth-error.show { display: block; }

        .auth-submit {
            width: 100%; padding: 14px; margin-top: 8px;
            background: var(--accent-gradient); color: #05080f;
            border: none; border-radius: var(--radius-sm);
            font-size: 16px; font-weight: 600; cursor: pointer;
            transition: var(--transition);
        }
        .auth-submit:hover { transform: translateY(-1px); box-shadow: 0 4px 20px rgba(99,198,255,0.4); }
        .auth-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .auth-switch {
            text-align: center; margin-top: 24px;
            color: var(--text-secondary); font-size: 14px;
        }
        .auth-switch a {
            color: var(--accent-primary); text-decoration: none; cursor: pointer;
        }
        .auth-switch a:hover { text-decoration: underline; }

        /* Footer */
        .footer {
            position: relative; z-index: 1;
            padding: 60px 40px 30px; text-align: center;
            border-top: 1px solid var(--border-color);
        }

        .footer-brand {
            display: inline-flex; align-items: center; gap: 10px;
            font-size: 20px; font-weight: 700; margin-bottom: 16px;
        }
        .footer-brand .logo {
            width: 32px; height: 32px; border-radius: 8px;
            background: var(--accent-gradient);
            display: flex; align-items: center; justify-content: center;
            font-size: 16px; font-weight: 800; color: #05080f;
        }

        .footer p { color: var(--text-tertiary); font-size: 13px; }

        /* Responsive */
        @media (max-width: 768px) {
            .nav { padding: 12px 20px; }
            .hero { padding: 100px 20px 60px; }
            .features { padding: 60px 20px; }
            .stats { gap: 40px; padding: 40px 20px; }
            .nav-links a.hide-mobile { display: none; }
        }

        /* Animations */
        .fade-up {
            opacity: 0; transform: translateY(30px);
            animation: fadeUp 0.8s ease forwards;
        }
        .fade-up-delay-1 { animation-delay: 0.1s; }
        .fade-up-delay-2 { animation-delay: 0.2s; }
        .fade-up-delay-3 { animation-delay: 0.3s; }

        @keyframes fadeUp {
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="bg-texture"></div>
    <div class="floating-orb orb-1"></div>
    <div class="floating-orb orb-2"></div>

    <!-- Navigation -->
    <nav class="nav">
        <a href="/" class="nav-brand">
            <div class="logo">è¨€</div>
            Koto
        </a>
        <div class="nav-links">
            <a href="#features" class="hide-mobile">åŠŸèƒ½</a>
            <a href="#about" class="hide-mobile">å…³äº</a>
            <button class="btn btn-ghost" onclick="showAuth('login')">ç™»å½•</button>
            <button class="btn btn-primary" onclick="showAuth('register')">å…è´¹æ³¨å†Œ</button>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-badge fade-up">
                âœ¨ AI é©±åŠ¨çš„æ™ºèƒ½å·¥ä½œå¹³å°
            </div>
            <h1 class="hero-title fade-up fade-up-delay-1">
                è®© AI æˆä¸º<br>ä½ çš„è¶…çº§åŠ©æ‰‹
            </h1>
            <p class="hero-desc fade-up fade-up-delay-2">
                Koto é›†æˆäº†æ–‡æ¡£å¤„ç†ã€PPT ç”Ÿæˆã€çŸ¥è¯†å›¾è°±ã€ä»£ç æ‰§è¡Œã€è¯­éŸ³äº¤äº’ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œ
                å¸®åŠ©ä½ é«˜æ•ˆå®Œæˆå„ç§å·¥ä½œä»»åŠ¡ã€‚
            </p>
            <div class="hero-actions fade-up fade-up-delay-3">
                <button class="btn btn-primary" onclick="showAuth('register')" style="padding: 14px 36px; font-size: 16px;">
                    å¼€å§‹ä½¿ç”¨ â†’
                </button>
                <a href="#features" class="btn btn-ghost" style="padding: 14px 36px; font-size: 16px;">
                    äº†è§£æ›´å¤š
                </a>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="features" id="features">
        <h2 class="section-title">å¼ºå¤§çš„ AI åŠŸèƒ½</h2>
        <p class="section-desc">ä»æ—¥å¸¸å¯¹è¯åˆ°ä¸“ä¸šæ–‡æ¡£å¤„ç†ï¼ŒKoto è¦†ç›–ä½ çš„æ‰€æœ‰éœ€æ±‚</p>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ğŸ’¬</div>
                <h3>æ™ºèƒ½å¯¹è¯</h3>
                <p>æ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢ï¼ˆGeminiã€æœ¬åœ°æ¨¡å‹ï¼‰ï¼Œå¤šè½®å¯¹è¯è®°å¿†ï¼Œ8 ç§ä¸»é¢˜é£æ ¼ï¼Œæµå¼å®æ—¶å“åº”ã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“„</div>
                <h3>æ–‡æ¡£å¤„ç†</h3>
                <p>Wordã€PDFã€Excelã€PPT å…¨æ ¼å¼æ”¯æŒï¼Œæ™ºèƒ½æ‰¹æ³¨ã€æ ¼å¼è½¬æ¢ã€å†…å®¹åˆ†æï¼Œä¸€ç«™å¼æ–‡æ¡£å·¥ä½œæµã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ¨</div>
                <h3>PPT ç”Ÿæˆ</h3>
                <p>è¾“å…¥ä¸»é¢˜å³å¯è‡ªåŠ¨ç”Ÿæˆä¸“ä¸š PPTï¼Œæ”¯æŒå¤šç§æ¨¡æ¿ã€å¸ƒå±€ä¼˜åŒ–ã€å›¾æ–‡æ’ç‰ˆã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ§ </div>
                <h3>çŸ¥è¯†å›¾è°±</h3>
                <p>è‡ªåŠ¨æå–æ–‡æ¡£ä¸­çš„æ¦‚å¿µå’Œå…³ç³»ï¼Œæ„å»ºå¯è§†åŒ–çŸ¥è¯†ç½‘ç»œï¼Œè®©ä¿¡æ¯ç»“æ„åŒ–å‘ˆç°ã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ’»</div>
                <h3>ä»£ç æ‰§è¡Œ</h3>
                <p>æ”¯æŒ Python ä»£ç åœ¨çº¿è¿è¡Œï¼Œæ•°æ®åˆ†æã€è‡ªåŠ¨åŒ–è„šæœ¬ã€æ–‡ä»¶å¤„ç†ä¸€é”®æå®šã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“</div>
                <h3>æ–‡ä»¶ç®¡ç†</h3>
                <p>æ™ºèƒ½æ–‡ä»¶ç»„ç»‡ã€è‡ªåŠ¨åˆ†ç±»å½’æ¡£ã€æ–‡ä»¶æœç´¢å¼•æ“ï¼Œè®©ä½ çš„å·¥ä½œç©ºé—´äº•äº•æœ‰æ¡ã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ™ï¸</div>
                <h3>è¯­éŸ³äº¤äº’</h3>
                <p>æ”¯æŒè¯­éŸ³è¾“å…¥å’Œ TTS è¯­éŸ³æ’­æŠ¥ï¼Œè§£æ”¾åŒæ‰‹ï¼Œè®©å¯¹è¯æ›´è‡ªç„¶ã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ¤–</div>
                <h3>æ™ºèƒ½ä»£ç†</h3>
                <p>å¤šæ­¥éª¤ä»»åŠ¡è‡ªåŠ¨æ‹†è§£æ‰§è¡Œï¼Œæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€å®šæ—¶ä»»åŠ¡ã€æ‰¹é‡å¤„ç†å…¨è‡ªåŠ¨å®Œæˆã€‚</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”’</div>
                <h3>å®‰å…¨å¯é </h3>
                <p>ç«¯åˆ°ç«¯åŠ å¯†ã€ç”¨æˆ·è®¤è¯ã€è¯·æ±‚é™æµï¼Œä¼ä¸šçº§å®‰å…¨ä¿éšœï¼Œæ•°æ®éšç§æœ‰ä¿è¯ã€‚</p>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section class="stats" id="about">
        <div class="stat">
            <div class="stat-value">160+</div>
            <div class="stat-label">API æ¥å£</div>
        </div>
        <div class="stat">
            <div class="stat-value">8</div>
            <div class="stat-label">ä¸»é¢˜é£æ ¼</div>
        </div>
        <div class="stat">
            <div class="stat-value">9</div>
            <div class="stat-label">æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</div>
        </div>
        <div class="stat">
            <div class="stat-value">âˆ</div>
            <div class="stat-label">åˆ›é€ å¯èƒ½</div>
        </div>
    </section>

    <!-- CTA -->
    <section style="position:relative;z-index:1;padding:100px 40px;text-align:center;">
        <h2 class="section-title" style="margin-bottom:24px;">å‡†å¤‡å¥½æå‡æ•ˆç‡äº†å—ï¼Ÿ</h2>
        <p class="section-desc" style="margin-bottom:40px;">å…è´¹æ³¨å†Œï¼Œç«‹å³ä½“éªŒ Koto çš„å…¨éƒ¨åŠŸèƒ½</p>
        <button class="btn btn-primary" onclick="showAuth('register')" style="padding:16px 48px;font-size:17px;">
            å…è´¹å¼€å§‹ â†’
        </button>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-brand">
            <div class="logo">è¨€</div>
            Koto
        </div>
        <p>Â© 2025 Koto. All rights reserved.</p>
    </footer>

    <!-- Auth Modal -->
    <div class="auth-overlay" id="authOverlay">
        <div class="auth-card">
            <!-- Login Form -->
            <div id="loginForm">
                <h2>æ¬¢è¿å›æ¥</h2>
                <p class="subtitle">ç™»å½•ä½ çš„ Koto è´¦æˆ·</p>
                <div class="auth-error" id="loginError"></div>
                <div class="form-group">
                    <label>é‚®ç®±</label>
                    <input type="email" id="loginEmail" placeholder="your@email.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" id="loginPassword" placeholder="è¾“å…¥å¯†ç " autocomplete="current-password">
                </div>
                <button class="auth-submit" id="loginBtn" onclick="handleLogin()">ç™»å½•</button>
                <div class="auth-switch">
                    è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ<a onclick="switchAuth('register')">å…è´¹æ³¨å†Œ</a>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" style="display:none;">
                <h2>åˆ›å»ºè´¦æˆ·</h2>
                <p class="subtitle">æ³¨å†Œä¸€ä¸ªå…è´¹çš„ Koto è´¦æˆ·</p>
                <div class="auth-error" id="registerError"></div>
                <div class="form-group">
                    <label>ç”¨æˆ·å</label>
                    <input type="text" id="registerName" placeholder="ä½ çš„åå­—" autocomplete="name">
                </div>
                <div class="form-group">
                    <label>é‚®ç®±</label>
                    <input type="email" id="registerEmail" placeholder="your@email.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" id="registerPassword" placeholder="è‡³å°‘ 6 ä½å­—ç¬¦" autocomplete="new-password">
                </div>
                <button class="auth-submit" id="registerBtn" onclick="handleRegister()">åˆ›å»ºè´¦æˆ·</button>
                <div class="auth-switch">
                    å·²æœ‰è´¦æˆ·ï¼Ÿ<a onclick="switchAuth('login')">ç™»å½•</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Auth modal management
        function showAuth(type) {
            document.getElementById('authOverlay').classList.add('active');
            switchAuth(type);
        }

        function hideAuth() {
            document.getElementById('authOverlay').classList.remove('active');
            clearErrors();
        }

        function switchAuth(type) {
            const login = document.getElementById('loginForm');
            const register = document.getElementById('registerForm');
            if (type === 'login') {
                login.style.display = 'block';
                register.style.display = 'none';
            } else {
                login.style.display = 'none';
                register.style.display = 'block';
            }
            clearErrors();
        }

        function clearErrors() {
            document.querySelectorAll('.auth-error').forEach(el => { el.className = 'auth-error'; el.textContent = ''; });
        }

        function showError(id, msg) {
            const el = document.getElementById(id);
            el.textContent = msg;
            el.className = 'auth-error show';
        }

        // Close modal on overlay click
        document.getElementById('authOverlay').addEventListener('click', function(e) {
            if (e.target === this) hideAuth();
        });

        // Enter key support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const overlay = document.getElementById('authOverlay');
                if (overlay.classList.contains('active')) {
                    if (document.getElementById('loginForm').style.display !== 'none') {
                        handleLogin();
                    } else {
                        handleRegister();
                    }
                }
            }
            if (e.key === 'Escape') hideAuth();
        });

        // Login handler
        async function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const btn = document.getElementById('loginBtn');

            if (!email || !password) {
                showError('loginError', 'è¯·å¡«å†™é‚®ç®±å’Œå¯†ç ');
                return;
            }

            btn.disabled = true;
            btn.textContent = 'ç™»å½•ä¸­...';

            try {
                const res = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await res.json();
                if (data.success) {
                    localStorage.setItem('koto_token', data.token);
                    localStorage.setItem('koto_user', JSON.stringify(data.user));
                    window.location.href = '/app';
                } else {
                    showError('loginError', data.error || 'ç™»å½•å¤±è´¥');
                }
            } catch (err) {
                showError('loginError', 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•');
            } finally {
                btn.disabled = false;
                btn.textContent = 'ç™»å½•';
            }
        }

        // Register handler
        async function handleRegister() {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const btn = document.getElementById('registerBtn');

            if (!name || !email || !password) {
                showError('registerError', 'è¯·å¡«å†™æ‰€æœ‰å­—æ®µ');
                return;
            }
            if (password.length < 6) {
                showError('registerError', 'å¯†ç è‡³å°‘éœ€è¦ 6 ä½å­—ç¬¦');
                return;
            }

            btn.disabled = true;
            btn.textContent = 'åˆ›å»ºä¸­...';

            try {
                const res = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, password })
                });
                const data = await res.json();
                if (data.success) {
                    localStorage.setItem('koto_token', data.token);
                    localStorage.setItem('koto_user', JSON.stringify(data.user));
                    window.location.href = '/app';
                } else {
                    showError('registerError', data.error || 'æ³¨å†Œå¤±è´¥');
                }
            } catch (err) {
                showError('registerError', 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•');
            } finally {
                btn.disabled = false;
                btn.textContent = 'åˆ›å»ºè´¦æˆ·';
            }
        }

        // Auto-redirect if already logged in
        (function checkAuth() {
            const token = localStorage.getItem('koto_token');
            if (token) {
                fetch('/api/auth/me', {
                    headers: { 'Authorization': 'Bearer ' + token }
                }).then(r => r.json()).then(data => {
                    if (data.success) window.location.href = '/app';
                }).catch(() => {});
            }
        })();

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>
